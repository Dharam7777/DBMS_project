DELIMITER $$
CREATE PROCEDURE `PRE_USERS`(INOUT `PRE_USERS` VARCHAR(300))
BEGIN
DECLARE VAR2 varchar(20) DEFAULT "";
DECLARE FINISHED2 INTEGER DEFAULT 0;
DECLARE CURSOR2 CURSOR FOR
SELECT d.username from does d join prepaid r on r.rid=d.rid ;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET FINISHED2=TRUE ;
OPEN CURSOR2;
LOOP2:LOOP
FETCH CURSOR2 INTO VAR2;
IF FINISHED2 THEN
LEAVE LOOP2;
END IF;
SET PRE_USERS=CONCAT(VAR2," , ",PRE_USERS);
END LOOP LOOP2;
CLOSE CURSOR2;
END$$


DELIMITER $$
CREATE POST_USERS`(INOUT `POST_USERS` VARCHAR(300))
BEGIN
DECLARE VAR1 varchar(20) DEFAULT "";
DECLARE FINISHED1 INTEGER DEFAULT 0;
DECLARE CURSOR1 CURSOR FOR
SELECT d.username from does d join postpaid r on r.rid=d.rid;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET FINISHED1=TRUE;
OPEN CURSOR1;
LOOP1:LOOP
FETCH CURSOR1 INTO VAR1;
IF FINISHED1 THEN
LEAVE LOOP1;
END IF;
SET POST_USERS=CONCAT(VAR1," , ",POST_USERS);
END LOOP LOOP1;
CLOSE CURSOR1;
END$$
DELIMITER ;